server:
  port: ${APP_PORT:8080}

spring:
  application:
    name: ms-pagamento

  # Importa o segredo específico da AWS
  config:
    import: "optional:aws-secretsmanager:database-credentials20260106135621376700000001"

  cloud:
    aws:
      region:
        static: us-east-1
      secretsmanager:
        # Permite desativar via variável de ambiente (útil para testes locais)
        enabled: ${SPRING_CLOUD_AWS_SECRETSMANAGER_ENABLED:true}

  datasource:
    # Valores injetados automaticamente pelo Secrets Manager
    url: ${DB_URL}
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
    show-sql: true

# Configurações de Integração (Todas agrupadas sob 'api')
api:
  mercadopago:
    userId: ${MP_USER_ID}
    externalPosId: ${MP_EXTERNAL_POS_ID}
    token: ${MP_TOKEN}
  
  # Novas configurações para comunicação entre microsserviços
  pedido:
    host: ${MS_PEDIDO_HOST}
  producao:
    host: ${MS_PRODUCAO_SERVER}

management:
  endpoints:
    web:
      exposure:
        include: "health,info,metrics,prometheus"
  endpoint:
    health:
      show-details: always